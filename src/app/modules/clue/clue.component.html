<div
  class="flex flex-col justify-between items-center gap-8 p-8 overflow-hidden text-white w-full h-full">
  @if (!question()) {
    <div class="flex w-full">
      <button
        ontouchstart=""
        class="flex justify-center items-center gap-2 text-2xl text-teal-500 bg-transparent border-2 border-teal-500 active:border-teal-700 active:text-teal-700 transition-all py-4 px-8 w-auto rounded-2xl"
        routerLink="/clues">
        Atr√°s
      </button>
    </div>
  }

  <div class="flex flex-col justify-center items-center flex-1 gap-4 w-full">
    @if (clue()) {
      @if (question()) {
        <div class="flex justify-center items-center gap-2">
          @for (question of clue()?.questions; track question.id) {
            <div
              class="w-2 h-2 rounded-lg {{
                !!question.answer
                  ? question.answer === question.correctAnswer
                    ? 'bg-teal-500'
                    : 'bg-rose-500'
                  : 'bg-gray-500'
              }}"></div>
          }
        </div>
        <p class="text-sm">Pregunta {{ question()?.id }} de 5</p>
        <div class="flex flex-col justify-center items-center gap-8 w-full">
          <p class="text-lg text-center">{{ question()?.question }}</p>
        </div>
        <div class="flex flex-col justify-center items-center gap-4 w-full">
          @for (option of question()?.options; track option.id) {
            <button
              ontouchstart=""
              [disabled]="!!question()?.answer"
              class="flex justify-center items-center gap-2 bg-indigo-900 border-2 transition-all py-4 px-8 rounded-2xl w-full {{
                !!question()?.answer
                  ? option.id === question()?.correctAnswer
                    ? 'text-teal-500 border-teal-500 active:border-teal-700 active:text-teal-700'
                    : option.id === question()?.answer
                      ? 'text-rose-500 border-rose-500 active:border-rose-700 active:text-rose-700'
                      : 'text-gray-300 border-gray-300 active:border-gray-500 active:text-gray-500'
                  : 'text-gray-300 border-gray-300 active:border-gray-500 active:text-gray-500'
              }}"
              (click)="onClickOption(option)">
              <div class="flex flex-col justify-center items-center flex-1 w-full">
                <span class="text-lg">{{ option.answer }}</span>
              </div>
            </button>
          }
        </div>
        <div class="flex justify-between items-center gap-4 w-full">
          <button
            ontouchstart=""
            [disabled]="question()?.id === '1'"
            class="flex justify-center items-center gap-2 bg-indigo-900 border-2 transition-all py-4 px-8 rounded-2xl w-full text-teal-500 border-teal-500 active:border-teal-700 active:text-teal-700 disabled:text-gray-400 disabled:border-gray-400"
            (click)="onClickGoToPreviousQuestion()">
            <div class="flex flex-col justify-center items-center flex-1 w-full">
              <span class="text-lg">Anterior</span>
            </div>
          </button>
          <button
            ontouchstart=""
            [disabled]="!question()?.answered"
            class="flex justify-center items-center gap-2 bg-indigo-900 border-2 transition-all py-4 px-8 rounded-2xl w-full text-teal-500 border-teal-500 active:border-teal-700 active:text-teal-700 disabled:text-gray-400 disabled:border-gray-400"
            (click)="onClickGoToNextQuestion()">
            <div class="flex flex-col justify-center items-center flex-1 w-full">
              <span class="text-lg">Siguiente</span>
            </div>
          </button>
        </div>
      } @else {
        @if (correctAnswers() === 5) {
          <div class="flex flex-col justify-center gap-16">
            <div class="flex flex-col justify-center gap-8">
              <h2 class="text-4xl text-center font-bold">¬°Ole tu chocho! üëèüèª</h2>
              <p class="text-2xl text-center">
                Has respondido a todas las preguntas correctamente.
              </p>
              <p class="text-2xl text-center">Aqu√≠ tienes tu pista:</p>
            </div>
            <div class="confetti-wrapper">
              @for (item of [].constructor(10); track $index) {
                <div class="confetti-piece"></div>
              }
            </div>
            <div
              class="flex flex-col justify-center items-center p-8 animate-bounce rounded-2xl bg-teal-500 shadow-xl overflow-hidden">
              <span class="text-lg font-semibold z-10 drop-shadow-md text-center">
                {{ getClue() }}
              </span>
              <div
                class="flex flex-col justify-center items-center flex-1 gap-2 w-full absolute -rotate-45 opacity-50">
                <div class="flex gap-6 text-xs">
                  @for (item of [].constructor(20); track $index) {
                    <span>{{ getEmoji() }}</span>
                  }
                </div>
                <div class="flex gap-6 text-sm">
                  @for (item of [].constructor(20); track $index) {
                    <span>{{ getEmoji() }}</span>
                  }
                </div>
                <div class="flex gap-6 text-md">
                  @for (item of [].constructor(20); track $index) {
                    <span>{{ getEmoji() }}</span>
                  }
                </div>
                <div class="flex gap-6 text-lg">
                  @for (item of [].constructor(20); track $index) {
                    <span>{{ getEmoji() }}</span>
                  }
                </div>
                <div class="flex gap-6 text-xl">
                  @for (item of [].constructor(20); track $index) {
                    <span>{{ getEmoji() }}</span>
                  }
                </div>
                <div class="flex gap-6 text-2xl">
                  @for (item of [].constructor(20); track $index) {
                    <span>{{ getEmoji() }}</span>
                  }
                </div>
                <div class="flex gap-6 text-xl">
                  @for (item of [].constructor(20); track $index) {
                    <span>{{ getEmoji() }}</span>
                  }
                </div>
                <div class="flex gap-6 text-lg">
                  @for (item of [].constructor(20); track $index) {
                    <span>{{ getEmoji() }}</span>
                  }
                </div>
                <div class="flex gap-6 text-md">
                  @for (item of [].constructor(20); track $index) {
                    <span>{{ getEmoji() }}</span>
                  }
                </div>
                <div class="flex gap-6 text-sm">
                  @for (item of [].constructor(20); track $index) {
                    <span>{{ getEmoji() }}</span>
                  }
                </div>
                <div class="flex gap-6 text-xs">
                  @for (item of [].constructor(20); track $index) {
                    <span>{{ getEmoji() }}</span>
                  }
                </div>
              </div>
            </div>
          </div>
        } @else if (correctAnswers() >= 3) {
          <div class="flex flex-col justify-center gap-16">
            <div class="flex flex-col justify-center gap-8">
              <h2 class="text-4xl text-center font-bold">¬°Muy bien!</h2>
              <p class="text-2xl text-center">
                Has conseguido responder a la mayor√≠a de las preguntas correctamente.
              </p>
              <p class="text-2xl text-center">Aqu√≠ tienes tu pista:</p>
            </div>
            <div class="confetti-wrapper">
              @for (item of [].constructor(10); track $index) {
                <div class="confetti-piece"></div>
              }
            </div>
            <div
              class="flex flex-col justify-center items-center p-8 animate-bounce rounded-2xl bg-teal-500 shadow-xl overflow-hidden">
              <span class="text-lg font-semibold z-10 drop-shadow-md text-center">
                {{ getClue() }}
              </span>
              <div
                class="flex flex-col justify-center items-center flex-1 gap-2 w-full absolute -rotate-45 opacity-50">
                <div class="flex gap-6 text-xs">
                  @for (item of [].constructor(20); track $index) {
                    <span>{{ getEmoji() }}</span>
                  }
                </div>
                <div class="flex gap-6 text-sm">
                  @for (item of [].constructor(20); track $index) {
                    <span>{{ getEmoji() }}</span>
                  }
                </div>
                <div class="flex gap-6 text-md">
                  @for (item of [].constructor(20); track $index) {
                    <span>{{ getEmoji() }}</span>
                  }
                </div>
                <div class="flex gap-6 text-lg">
                  @for (item of [].constructor(20); track $index) {
                    <span>{{ getEmoji() }}</span>
                  }
                </div>
                <div class="flex gap-6 text-xl">
                  @for (item of [].constructor(20); track $index) {
                    <span>{{ getEmoji() }}</span>
                  }
                </div>
                <div class="flex gap-6 text-2xl">
                  @for (item of [].constructor(20); track $index) {
                    <span>{{ getEmoji() }}</span>
                  }
                </div>
                <div class="flex gap-6 text-xl">
                  @for (item of [].constructor(20); track $index) {
                    <span>{{ getEmoji() }}</span>
                  }
                </div>
                <div class="flex gap-6 text-lg">
                  @for (item of [].constructor(20); track $index) {
                    <span>{{ getEmoji() }}</span>
                  }
                </div>
                <div class="flex gap-6 text-md">
                  @for (item of [].constructor(20); track $index) {
                    <span>{{ getEmoji() }}</span>
                  }
                </div>
                <div class="flex gap-6 text-sm">
                  @for (item of [].constructor(20); track $index) {
                    <span>{{ getEmoji() }}</span>
                  }
                </div>
                <div class="flex gap-6 text-xs">
                  @for (item of [].constructor(20); track $index) {
                    <span>{{ getEmoji() }}</span>
                  }
                </div>
              </div>
            </div>
          </div>
        } @else {
          <div class="flex flex-col justify-between flex-1 gap-8">
            <div class="flex flex-col justify-center flex-1 gap-8">
              <h2 class="text-4xl text-center">ü§® Vaya pringada...</h2>
              <p class="text-2xl text-center">Int√©ntalo de nuevo, anda.</p>
            </div>
            <button
              ontouchstart=""
              class="flex justify-center items-center gap-2 bg-transparent border-2 transition-all py-4 px-8 rounded-2xl w-full text-teal-500 border-teal-500 active:border-teal-700 active:text-teal-700"
              (click)="onClickRestart()">
              <div class="flex flex-col justify-center items-center flex-1 w-full">
                <span class="text-xl">Volver a empezar</span>
              </div>
            </button>
          </div>
        }
      }
    }
  </div>
</div>
